"use strict";var e={props:{item:{type:Object,default:()=>({})},value:[String,Number,Array],allDisabled:{type:Boolean,default:!1},randomId:{type:String,default:""}},inject:["dynamicDict","dynamicSelectOption","changeData","statusChangeFn","formItemType","childChangeData"],computed:{bindAttrs(){const e=Object.assign({},this.item);return["key","events","onFocus","onBlur","onInput","onChange","type","label","readonly","rules","placeholder","prepend","append","defaultValue","optionsConfig","getOptionsData"].forEach(t=>{delete e[t]}),e},bindEvents(){return Object.assign({},this.item.events)},getDisabled(){if(this.allDisabled)return!0;if("childForm"===this.formItemType){const e=`${this.childChangeData.formKey}_${this.randomId}_${this.item.key}`;if(this.changeData.disableList.indexOf(e)>-1)return!0}else if(this.changeData.disableList.indexOf(this.item.key)>-1)return!0;return!1},val:{get(){return this.value},set(e){this.$emit("input",e),"childForm"!==this.formItemType?this.statusChangeFn.valueUpdateEvent({[this.item.key]:e}):this.childChangeData.valueUpdateEvent()}},getTextModel(){return!!this.item.isText||!!this.changeData.textModel}},methods:{getPlaceholder:e=>e.disable?"":e.placeholder?e.placeholder:"请输入"+e.label,getSelectPlaceholder:e=>e.disable?"":void 0!==e.placeholder&&null!==e.placeholder?e.placeholder:"请选择"+e.label,onFocus(e,t,i){e.onFocus?e.onFocus(i,e,t):e.events&&e.events.focus&&e.events.focus(i,e,t)},onBlur(e,t,i){e.onBlur?e.onBlur(i,e,t):e.events&&e.events.blur&&e.events.blur(i,e,t)},onChange(e,t){e.onChange?e.onChange(t,e):e.events&&e.events.change&&e.events.change(t,e)},onInput(e,t){if(e.limitInputRegExp){const i=t.replace(e.limitInputRegExp,"");this.$emit("input",i)}e.onInput?e.onInput(t,e):e.events&&e.events.input&&e.events.input(t,e)},_valueLink(e){"childForm"===this.formItemType?this._valueLinkByChildForm(e):this._valueLinkByForm(e)},_valueLinkByForm(e){console.log("_valueLinkByForm",e),this.item.valueLink&&this.item.valueLink.length&&this.item.valueLink.length>0&&this.item.valueLink.forEach(t=>{if(!e||"."!==t.value&&"[.]"!==t.value)if(e&&(i=e,!Array.isArray(i)||!i.length)||""!==t.value&&"[]"!==t.value){if(e!==t.value)return}else console.log("设置无值时匹配联动");else console.log("设置有值时匹配联动");var i;t.linkList&&t.linkList.length&&t.linkList.length>0&&t.linkList.forEach(e=>{const t=e.linkKey;t&&(e.enableLinkValue&&this.statusChangeFn.updateFormData({[t]:e.linkValue}),e.enableLinkDisable&&this.statusChangeFn.setElementDisable(t,e.linkDisable),e.enableLinkHidden&&this.statusChangeFn.setElementHidden(t,e.linkHidden),e.enableLinkRequired&&this.statusChangeFn.setElementRequired(t,e.linkRequired))})})},_valueLinkByChildForm(e){this.item.valueLink&&this.item.valueLink.length&&this.item.valueLink.length>0&&this.item.valueLink.forEach(t=>{e===t.value&&t.linkList&&t.linkList.length&&t.linkList.length>0&&t.linkList.forEach(e=>{const t=e.linkKey;if(!t)return;e.enableLinkValue&&this.childChangeData.updateFormData({[t]:e.linkValue},this.randomId);const i=this.childChangeData.formKey,a=this.randomId,n=`${i}_${a}_${e.linkKey}`;e.enableLinkDisable&&this.statusChangeFn.setElementDisable(n,e.linkDisable),e.enableLinkHidden&&this.statusChangeFn.setElementHidden(n,e.linkHidden),e.enableLinkRequired&&this.childChangeData.setElementRequired(t,a,e.linkRequired)})})},throwPointRightZero(e){const t=String(e);if(t.indexOf(".")>-1){const e=t.split(".");let i=e[1];return i=i.replace(/[0]+$/g,""),0===i.length?e[0]:e[0]+"."+i}return t},throwPointLeftZero(e){let t=String(e);if(t.indexOf(".")>-1){const e=t.split(".");let i=e[0];return i=i.replace(/^[0]+/g,""),0===i.length?"0."+e[1]:i+"."+e[1]}return t=t.replace(/^[0]+/g,""),""===t&&""!==e&&(t="0"),t}}};function t(e,t,i,a,n,s,l,o,r,d){"boolean"!=typeof l&&(r=o,o=l,l=!1);const c="function"==typeof i?i.options:i;let m;if(e&&e.render&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0,n&&(c.functional=!0)),a&&(c._scopeId=a),s?(m=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,r(e)),e&&e._registeredComponents&&e._registeredComponents.add(s)},c._ssrRegister=m):t&&(m=l?function(e){t.call(this,d(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,o(e))}),m)if(c.functional){const e=c.render;c.render=function(t,i){return m.call(i),e(t,i)}}else{const e=c.beforeCreate;c.beforeCreate=e?[].concat(e,m):[m]}return i}const i=t({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form-input-box form-item-box",class:"quick-form-unqiue-"+e.item.key,style:e.item.valueWrapStyle||{}},[e.getTextModel?i("div",{staticClass:"form-input-text",style:e.item.textStyle||{}},[e.prepend?i("span",{staticClass:"prepend-msg"},[e._v(e._s(e.prepend))]):e._e(),e._v(" "),i("span",{staticClass:"text"},[e._v(e._s(e.val||"-"))]),e._v(" "),e.append?i("span",{staticClass:"append-msg"},[e._v(e._s(e.append))]):e._e()]):i("el-input",e._b({style:e.item.valueBoxStyle||{},attrs:{placeholder:e.getPlaceholder(e.item),disabled:e.getDisabled,type:"text",clearable:!0},on:{blur:function(t){return e.onBlur(e.item,t,e.val)},focus:function(t){return e.onFocus(e.item,t,e.val)},input:function(t){return e.onInput(e.item,t)},change:function(t){return e.onChange(e.item,t)}},model:{value:e.val,callback:function(t){e.val="string"==typeof t?t.trim():t},expression:"val"}},"el-input",e.bindAttrs,!1),[e.prepend?i("template",{slot:"prepend"},[e._v(e._s(e.prepend))]):e._e(),e._v(" "),e.append?i("template",{slot:"append"},[e._v(e._s(e.append))]):e._e()],2)],1)},staticRenderFns:[]},void 0,{name:"FormInput",mixins:[e],computed:{prepend(){return this.item.prepend?this.item.prepend:this.item.prependMsg?this.item.prependMsg:this.item.prefixMsg?this.item.prefixMsg:""},append(){return this.item.append?this.item.append:this.item.appendMsg?this.item.appendMsg:this.item.suffixMsg?this.item.suffixMsg:""}}},"data-v-9d7fbe1c",!1,void 0,!1,void 0,void 0,void 0);var a={name:"FormInput",mixins:[e],data:()=>({}),computed:{prepend(){return this.item.prepend?this.item.prepend:this.item.prependMsg?this.item.prependMsg:""},append(){return this.item.append?this.item.append:this.item.appendMsg?this.item.appendMsg:""}}};const n="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function s(e){return(e,t)=>function(e,t){const i=n?t.media||"default":e,a=o[i]||(o[i]={ids:new Set,styles:[]});if(!a.ids.has(e)){a.ids.add(e);let i=t.source;if(t.map&&(i+="\n/*# sourceURL="+t.map.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),a.element||(a.element=document.createElement("style"),a.element.type="text/css",t.media&&a.element.setAttribute("media",t.media),void 0===l&&(l=document.head||document.getElementsByTagName("head")[0]),l.appendChild(a.element)),"styleSheet"in a.element)a.styles.push(i),a.element.styleSheet.cssText=a.styles.filter(Boolean).join("\n");else{const e=a.ids.size-1,t=document.createTextNode(i),n=a.element.childNodes;n[e]&&a.element.removeChild(n[e]),n.length?a.element.insertBefore(t,n[e]):a.element.appendChild(t)}}}(e,t)}let l;const o={};const r=t({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form-input-box form-item-box",class:"quick-form-unqiue-"+e.item.key,style:e.item.valueWrapStyle||{}},[e.getTextModel?i("div",{style:e.item.textStyle||{}},[e._v("\n    "+e._s(e.val||"-")+"\n  ")]):i("el-input",e._b({style:e.item.valueBoxStyle||{},attrs:{placeholder:e.getPlaceholder(e.item),disabled:e.getDisabled,type:"textarea",autosize:e.item.autosize||!1,rows:e.item.autosize?"":4,resize:e.item.resize||"none"},on:{blur:function(t){return e.onBlur(e.item,t)},focus:function(t){return e.onFocus(e.item,t)}},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}},"el-input",e.item,!1))],1)},staticRenderFns:[]},(function(e){e&&e("data-v-11e99b09_0",{source:".form-input-box[data-v-11e99b09] .el-input-group__prepend,.single-input .form-input-box[data-v-11e99b09] .el-input-group__append{padding:0 10px}",map:void 0,media:void 0})}),a,"data-v-11e99b09",!1,void 0,!1,s,void 0,void 0);const d=t({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form-item-box",class:"quick-form-unqiue-"+e.item.key,style:e.item.valueWrapStyle||{}},[e.getTextModel?i("div",{style:e.item.textStyle||{}},[e._v(e._s(e.textModelValue||"-"))]):i("el-select",e._b({style:e.item.valueBoxStyle||{},attrs:{disabled:e.getDisabled,placeholder:e.getPlaceholder(e.item)},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}},"el-select",e.bindAttrs,!1),e._l(e.dynamicDict[e.item.parentKey],(function(t){return i("el-option",{key:t[e.dynamicSelectOption.value],attrs:{label:t[e.dynamicSelectOption.label],value:t[e.dynamicSelectOption.value]}})})),1)],1)},staticRenderFns:[]},void 0,{name:"FormDynamicSelect",mixins:[e],computed:{textModelValue(){const e=this.dynamicDict[this.item.parentKey]&&this.dynamicDict[this.item.parentKey].find(e=>e[this.dynamicSelectOption.value]===this.val);return e&&e[this.dynamicSelectOption.label]||""},val:{get(){return this.value},set(e){this.$emit("input",e),this._valueLink(e),"childForm"!==this.formItemType?this.statusChangeFn.valueUpdateEvent({[this.item.key]:e}):this.childChangeData.valueUpdateEvent()}}}},"data-v-dcb662a0",!1,void 0,!1,void 0,void 0,void 0);var c={created(){this.getOptionsData()},methods:{getOptionsData(e){var t;this.item.getOptionsData&&"function"===(t=this.item.getOptionsData,Object.prototype.toString.call(t).toLowerCase().replace(/^\[object\s(\w+)\]$/,(...e)=>e[1]))&&this.item.getOptionsData(e||{}).then(({data:e})=>{if(!Array.isArray(e))return;let t=e;this.item.optionsConfig&&(t=e.map(e=>(this.item.optionsConfig.label&&(e.label=e[this.item.optionsConfig.label]),this.item.optionsConfig.value&&(e.value=e[this.item.optionsConfig.value]),e))),this.item.options=t})}}};const m=t({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form-item-box",class:"quick-form-unqiue-"+e.item.key,style:e.item.valueWrapStyle||{}},[e.getTextModel?i("div",{style:e.item.textStyle||{}},[e._v(e._s(e.textModelValue||"-"))]):i("el-select",e._b({style:e.item.valueBoxStyle||{},attrs:{disabled:e.getDisabled,placeholder:e.getSelectPlaceholder(e.item)},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}},"el-select",e.bindAttrs,!1),e._l(e.item.options,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)},staticRenderFns:[]},void 0,{name:"FormNormalSelect",mixins:[e,c],computed:{textModelValue(){if(this.item.options){let e="";return this.item.options.forEach(t=>{t.value===this.value&&(e=t.label)}),e}return""},val:{get(){return this.value},set(e){this.$emit("input",e),this._valueLink(e),"childForm"!==this.formItemType?this.statusChangeFn.valueUpdateEvent({[this.item.key]:e}):this.childChangeData.valueUpdateEvent()}}}},"data-v-0a61ee6c",!1,void 0,!1,void 0,void 0,void 0);const h=t({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form-item-box",class:"quick-form-unqiue-"+e.item.key,style:e.item.valueWrapStyle||{}},[e.getTextModel?i("div",{style:e.item.textStyle||{}},[e._v(e._s(e.textModelValue||"-"))]):i("el-tree-select",e._g({ref:"treeSelect_"+e.item.key,style:e.item.valueBoxStyle||{},attrs:{disabled:e.getDisabled,placeholder:e.getSelectPlaceholder(e.item),selectParams:e.selectParams,treeParams:e.treeParams},on:{searchFun:e.treeSearchFun},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}},e.bindEvents))],1)},staticRenderFns:[]},(function(e){e&&e("data-v-466317da_0",{source:"[data-v-466317da] .el-tree-select-input{width:100%}",map:void 0,media:void 0})}),{name:"FormNormalSelect",mixins:[e],computed:{selectParams(){let e=this.item.selectParams||{};return{...this.bindAttrs,...e}},treeParams(){let e=this.item.treeParams||{};return this.item.options||console.log("请用options"),console.log("this.item.options",this.item.options),!e.data&&this.item.options&&(e.data=this.item.options),e},textModelValue(){if(this.item.options){let e="";return this.item.options.forEach(t=>{t.value===this.value&&(e=t.label)}),e}return""},val:{get(){return this.value},set(e){this.$emit("input",e),this._valueLink(e),"childForm"!==this.formItemType?this.statusChangeFn.valueUpdateEvent({[this.item.key]:e}):this.childChangeData.valueUpdateEvent()}}},methods:{treeSearchFun(e){this.$refs["treeSelect_"+this.item.key].filterFun(e)}}},"data-v-466317da",!1,void 0,!1,s,void 0,void 0);const u=t({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form-item-box",class:"quick-form-unqiue-"+e.item.key,style:e.item.valueWrapStyle||{}},[e.getTextModel?i("div",{style:e.item.textStyle||{}},[e._v(e._s(e.textModelValue||"-"))]):i("el-select",e._b({style:e.item.valueBoxStyle||{},attrs:{disabled:e.getDisabled,placeholder:e.getSelectPlaceholder(e.item),multiple:""},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}},"el-select",e.bindAttrs,!1),e._l(e.item.options,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)},staticRenderFns:[]},(function(e){e&&e("data-v-4c01c36c_0",{source:".form-item-box[data-v-4c01c36c] .el-input{position:relative;width:100%}.form-item-box[data-v-4c01c36c] .el-input .el-input__inner:focus{border-color:#8d94a5}.el-select-dropdown__item.selected[data-v-4c01c36c]{color:#606266;font-weight:400}",map:void 0,media:void 0})}),{name:"FormMutipleSelect",mixins:[e,c],computed:{textModelValue(){if(this.item.options){let e="";return this.item.options.forEach(t=>{t.value===this.value&&(e=t.label)}),e}return""},val:{get(){return this.value},set(e){this.$emit("input",e),this._valueLink(e),"childForm"!==this.formItemType?this.statusChangeFn.valueUpdateEvent({[this.item.key]:e}):this.childChangeData.valueUpdateEvent()}}}},"data-v-4c01c36c",!1,void 0,!1,s,void 0,void 0);const p=t({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form-item-box",class:"quick-form-unqiue-"+e.item.key,style:e.item.valueWrapStyle||{}},[e.getTextModel?i("div",{style:e.item.textStyle||{}},[e._v(e._s(e.val||"-"))]):i("el-date-picker",e._b({staticClass:"form-date-item",style:e.item.valueBoxStyle||{},attrs:{type:"date",disabled:e.getDisabled,placeholder:e.getPlaceholder(e.item),"picker-options":e.item.pickerOptions?e.handlerDate(e.item.pickerOptions):function(){return!1},"value-format":"yyyy-MM-dd",clearable:!0},on:{blur:function(t){return e.onBlur(e.item,t)},focus:function(t){return e.onFocus(e.item,t)}},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}},"el-date-picker",e.bindAttrs,!1))],1)},staticRenderFns:[]},void 0,{name:"FormDate",mixins:[e],methods:{handlerDate(e){const{before:t,after:i,maxOffset:a,minOffset:n}=e;return{disabledDate:e=>t?e.getTime()<Date.now()-864e5:i?e.getTime()>Date.now():a&&!n?e.getTime()<a:n&&!a?e.getTime()>n-864e5:a&&n?e.getTime()>n-864e5||e.getTime()<a:void 0}}}},"data-v-5fca44e1",!1,void 0,!1,void 0,void 0,void 0);const f=t({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form-item-box",class:"quick-form-unqiue-"+e.item.key,style:e.item.valueWrapStyle||{}},[e.getTextModel?i("div",{style:e.item.textStyle||{}},[e._v(e._s(e.val||"-"))]):i("el-date-picker",e._b({staticClass:"form-date-item",style:e.item.valueBoxStyle||{},attrs:{type:"datetime",disabled:e.getDisabled,placeholder:e.getPlaceholder(e.item),"picker-options":e.item.pickerOptions?e.handlerDate(e.item.pickerOptions):function(){return!1},clearable:!0},on:{blur:function(t){return e.onBlur(e.item,t)},focus:function(t){return e.onFocus(e.item,t)}},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}},"el-date-picker",e.bindAttrs,!1))],1)},staticRenderFns:[]},void 0,{name:"FormDate",mixins:[e],methods:{handlerDate(e){const{before:t,after:i,maxOffset:a,minOffset:n}=e;return{disabledDate:e=>t?e.getTime()<Date.now()-864e5:i?e.getTime()>Date.now():a&&!n?e.getTime()<a:n&&!a?e.getTime()>n-864e5:a&&n?e.getTime()>n-864e5||e.getTime()<a:void 0}}}},"data-v-42df295a",!1,void 0,!1,void 0,void 0,void 0);const v=t({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form-item-box",class:"quick-form-unqiue-"+e.item.key,style:e.item.valueWrapStyle||{}},[e.getTextModel?i("div",{style:e.item.textStyle||{}},[e._v(e._s(e.val||"-"))]):i("el-time-picker",e._b({staticClass:"form-date-item",style:e.item.valueBoxStyle||{},attrs:{type:"date",disabled:e.getDisabled,placeholder:e.getPlaceholder(e.item),format:e.item.format||"HH:mm","value-format":e.item["value-format"]||"HH:mm:00"},on:{blur:function(t){return e.onBlur(e.item,t)},focus:function(t){return e.onFocus(e.item,t)}},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}},"el-time-picker",e.bindAttrs,!1))],1)},staticRenderFns:[]},void 0,{name:"FormHourMinute",mixins:[e],methods:{}},"data-v-9084ed32",!1,void 0,!1,void 0,void 0,void 0);const y=t({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form-item-box",class:"quick-form-unqiue-"+e.item.key,style:e.item.valueWrapStyle||{}},[e.getTextModel?i("div",{style:e.item.textStyle||{}},[e._v(e._s(e.textModelValue||"-"))]):i("el-date-picker",e._b({style:e.item.valueBoxStyle||{},attrs:{type:"daterange",disabled:e.getDisabled,placeholder:e.getPlaceholder(e.item),"value-format":"yyyy-MM-dd",clearable:!0},on:{blur:function(t){return e.onBlur(e.item,t)},focus:function(t){return e.onFocus(e.item,t)}},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}},"el-date-picker",e.bindAttrs,!1))],1)},staticRenderFns:[]},void 0,{name:"FormDateRange",props:{value:{type:String,default:""}},mixins:[e],computed:{val:{get(){return this.value?JSON.parse(this.value):[]},set(e){this.$emit("input",JSON.stringify(e)),"childForm"!==this.formItemType?this.statusChangeFn.valueUpdateEvent({[this.item.key]:e}):this.childChangeData.valueUpdateEvent()}},textModelValue(){return this.val&&this.val.join("至")}}},"data-v-7a7f18dc",!1,void 0,!1,void 0,void 0,void 0);const g=t({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form-item-box",class:"quick-form-unqiue-"+e.item.key,style:e.item.valueWrapStyle||{}},[e.getTextModel?i("div",{style:e.item.textStyle||{}},[e._v(e._s(e.textModelValue||"-"))]):i("el-date-picker",e._b({style:e.item.valueBoxStyle||{},attrs:{type:"datetimerange",disabled:e.getDisabled,placeholder:e.getPlaceholder(e.item),clearable:!0,"value-format":"yyyy-MM-dd HH:mm"},on:{blur:function(t){return e.onBlur(e.item,t)},focus:function(t){return e.onFocus(e.item,t)}},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}},"el-date-picker",e.bindAttrs,!1))],1)},staticRenderFns:[]},void 0,{name:"FormDateTimeRange",props:{value:{type:String,default:""}},mixins:[e],computed:{val:{get(){return this.value?JSON.parse(this.value):[]},set(e){this.$emit("input",JSON.stringify(e)),"childForm"!==this.formItemType?this.statusChangeFn.valueUpdateEvent({[this.item.key]:e}):this.childChangeData.valueUpdateEvent()}},textModelValue(){return this.val&&this.val.join("至")}}},"data-v-9da16ba2",!1,void 0,!1,void 0,void 0,void 0);const b=t({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form-item-box",class:"quick-form-unqiue-"+e.item.key,style:e.item.valueWrapStyle||{}},[e.getTextModel?i("div",{style:e.item.textStyle||{}},[e._v(e._s(e.val||"-"))]):i("el-autocomplete",e._b({ref:"autocomplete_"+e.item.key,staticClass:"auto-complte-input",style:e.item.valueBoxStyle||{},attrs:{placeholder:e.getPlaceholder(e.item),disabled:e.getDisabled,"value-key":"value","fetch-suggestions":e.querySearchAsync},on:{blur:function(t){return e.onBlur(e.item,t)},focus:function(t){return e.onFocus(e.item,t)},select:e.handleSelect},model:{value:e.val,callback:function(t){e.val="string"==typeof t?t.trim():t},expression:"val"}},"el-autocomplete",e.bindAttrs,!1),[i("i",{directives:[{name:"show",rawName:"v-show",value:e.val,expression:"val"}],staticClass:"el-input_icon el-icon-circle-close el-input__clear",attrs:{slot:"suffix"},on:{click:function(t){return e.closeSelect(e.$refs["autocomplete_"+e.item.key])}},slot:"suffix"})])],1)},staticRenderFns:[]},void 0,{name:"FormAutoComplete",mixins:[e,c],methods:{searchAsync(e){this.getOptionsData({[this.item.searchKey]:e})},querySearchAsync(e,t){const i={[this.item.searchKey]:e};this.item.otherSearchKeys&&this.item.otherSearchKeys.length>0&&this.item.otherSearchKeys.forEach(e=>{i[e.key]=e.value}),this.item.getOptionsData(i).then(({data:e})=>{if(e){const i=e.map(e=>(console.log("item",e),this.item.mainShowKey?{...e,item:e,value:e[this.item.mainShowKey]}:{...e,item:e,value:e[this.item.autoCompleteKeys[0]]}));console.log("ddddd",i),t(i),this.item.fetchSuggestions&&this.item.fetchSuggestions(i,this.randomId)}else t([]),this.item.fetchSuggestions&&this.item.fetchSuggestions([],this.randomId),this.$message.error("无匹配数据")})},closeSelect(e){try{e.$children[0].clear(),e.$children[0].focus(),e.activated=!0}catch(e){console.log(e)}},handleSelect(e){const t={};this.item.autoCompleteKeys.forEach(i=>{t[i]=e.item[this.item.mainValueKey]}),console.log("his.statusChangeFn.updateFormData",t),this.statusChangeFn.updateFormData(t),this.item.onSelect&&this.item.onSelect(e,this.randomId)}}},"data-v-35aed11f",!1,void 0,!1,void 0,void 0,void 0);const k=t({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form-item-box",class:e.getClass(),style:e.item.valueWrapStyle||{}},[e.getTextModel?i("div",{style:e.item.textStyle||{}},[e._v("\n    "+e._s(e.prepend)+"\n    "+e._s(e.dealInputValue||"-")+"\n    "+e._s(e.append)+"\n  ")]):[i("el-input",e._g(e._b({staticClass:"input-wr",style:e.item.valueBoxStyle||{},attrs:{placeholder:e.getPlaceholder(e.item),disabled:e.getDisabled,type:"number",clearable:!0},on:{blur:function(t){return e.onBlur(e.item,t)},focus:function(t){return e.onFocus(e.item,t)},input:function(t){return e.onInput(e.item,t)}},nativeOn:{keydown:function(t){return e.onKeydown(t)}},model:{value:e.tempVal,callback:function(t){e.tempVal="string"==typeof t?t.trim():t},expression:"tempVal"}},"el-input",e.bindAttrs,!1),e.bindEvents),[e.prepend?i("template",{slot:"prepend"},[e._v(e._s(e.prepend))]):e._e(),e._v(" "),e.append?i("template",{slot:"append"},[e._v(e._s(e.append))]):e._e()],2),e._v(" "),i("el-input",e._b({directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"input-readonly",attrs:{placeholder:""+(e.getPlaceholder(e.item)+1),disabled:e.getDisabled,type:"input",clearable:!0},model:{value:e.dealInputValue,callback:function(t){e.dealInputValue="string"==typeof t?t.trim():t},expression:"dealInputValue"}},"el-input",e.bindAttrs,!1),[e.prepend?i("template",{slot:"prepend"},[e._v(e._s(e.prepend))]):e._e(),e._v(" "),e.append?i("template",{slot:"append"},[e._v(e._s(e.append))]):e._e()],2)]],2)},staticRenderFns:[]},void 0,{name:"FormNumberInput",mixins:[e],data:()=>({readonly:!0,tempVal:""}),computed:{dealInputValue(){if(""===this.value)return"";return String(this.value).toString().replace(/\d+/,e=>e.replace(/(\d)(?=(\d{3})+$)/g,e=>e+","))},prepend(){return this.item.prepend?this.item.prepend:this.item.prefixMsg?this.item.prefixMsg:this.item.symbolBeforeMsg?this.item.symbolBeforeMsg:""},append(){return this.item.append?this.item.append:this.item.suffixMsg?this.item.suffixMsg:this.item.symbolAfterMsg?this.item.symbolAfterMsg:""},val:{get(){return""===this.value?"":this.value},set(e){if(""===e)return this.$emit("input",e),void("childForm"!==this.formItemType?this.statusChangeFn.valueUpdateEvent({[this.item.key]:t}):this.childChangeData.valueUpdateEvent());let t=String(e);if(this.item.positive&&t&&Number(t)<0&&(t="0"),this.item.decimalLimit&&this.item.decimalLimit>0||this.item.zeroMsg&&this.item.zeroMsg>0){const e=this.item.decimalLimit||this.item.zeroMsg;if(t.includes(".")&&t.split(".").length>1){if(t.split(".")[1].length>e){const i=t.split(".");t=`${i[0]}.${i[1].slice(0,e)}`}}}this.item.positive&&t&&Number(t)<0&&(t="0"),this.$emit("input",t),"childForm"!==this.formItemType?this.statusChangeFn.valueUpdateEvent({[this.item.key]:t}):this.childChangeData.valueUpdateEvent()}}},methods:{onKeydown(e){(!this.item.positive||"-"!==e.key&&"Minus"!==e.code)&&(!this.item.onlyInt||"."!==e.key&&"Period"!==e.code)||e.preventDefault()},onInput(e){e.limitInputRegExp&&(this.tempVal=this.tempVal.replace(e.limitInputRegExp,""),console.log("onInput",this.tempVal))},getClass(){return{["quick-form-unqiue-"+this.item.key]:!0,[this.readonly?"is-readonly":"is-wr"]:!0}},onBlur(){if(this.readonly=!0,""===this.tempVal)return this.$emit("input",this.tempVal),void this.statusChangeFn.valueUpdateEvent({[this.item.key]:this.tempVal});let e=this.tempVal;if(this.item.zeroPadding&&this.item.zeroPadding>0){const t=String(e).split(".");if(1===t.length)0===t[0].length?e="":e+="."+"0".padEnd(this.item.zeroPadding,"0");else{const i=t[1].length;i<this.item.zeroPadding&&(e=t[0]+"."+t[1].padEnd(this.item.zeroPadding,"0")),i>this.item.zeroPadding&&(e=String(t[0])+"."+t[1].slice(0,this.item.zeroPadding))}}e=String(e),e=e.split(".").map((e,t)=>{if(0!==t)return e;const i=e.replace(/$0+/g,"");return 0===i.length?"0":i}).join("."),this.item.positive&&e<0&&(e=0),this.tempVal=this.throwPointLeftZero(this.tempVal),this.tempVal=this.throwPointRightZero(this.tempVal),this.val=e},onFocus(){const e=this.value;this.tempVal=String(e),this.readonly=!1}}},"data-v-3f48abbd",!1,void 0,!1,void 0,void 0,void 0);const x=t({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form-input-box form-item-box",class:"quick-form-unqiue-"+e.item.key,style:e.item.valueWrapStyle||{}},[e.getTextModel?i("div",{style:e.item.textStyle||{}},[e._v(e._s(e.textModelValue||"-"))]):i("el-radio-group",e._b({style:e.item.valueBoxStyle||{},attrs:{disabled:e.getDisabled,clearable:!0},on:{blur:function(t){return e.onBlur(e.item,t)},focus:function(t){return e.onFocus(e.item,t)}},model:{value:e.val,callback:function(t){e.val="string"==typeof t?t.trim():t},expression:"val"}},"el-radio-group",e.bindAttrs,!1),e._l(e.item.options,(function(t){return i("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1)},staticRenderFns:[]},(function(e){e&&e("data-v-7f551065_0",{source:".form-input-box[data-v-7f551065] .el-input-group__prepend,.single-input .form-input-box[data-v-7f551065] .el-input-group__append{padding:0 10px}",map:void 0,media:void 0})}),{name:"FormRadio",mixins:[e],data:()=>({prependMsg:"",appendMsg:""}),computed:{textModelValue(){const e=this.item.options&&this.item.options.find(e=>e.value===this.val);return e&&e.label||""},val:{get(){return this.value},set(e){this.$emit("input",e),this._valueLink(e),"childForm"!==this.formItemType?this.statusChangeFn.valueUpdateEvent({[this.item.key]:e}):this.childChangeData.valueUpdateEvent()}}},watch:{item:{handler(e){e.prefixMsg&&(this.prependMsg=e.prefixMsg),e.suffixMsg&&(this.appendMsg=e.suffixMsg)},immediate:!0}}},"data-v-7f551065",!1,void 0,!1,s,void 0,void 0);const _=t({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form-input-box form-item-box",class:"quick-form-unqiue-"+e.item.key,style:e.item.valueWrapStyle||{}},[e.getTextModel?i("div",{style:e.item.textStyle||{}},[e._v(e._s(e.textModelValue||"-"))]):i("el-checkbox-group",e._b({style:e.item.valueBoxStyle||{},attrs:{disabled:e.getDisabled,clearable:!0},on:{blur:function(t){return e.onBlur(e.item,t)},focus:function(t){return e.onFocus(e.item,t)}},model:{value:e.val,callback:function(t){e.val="string"==typeof t?t.trim():t},expression:"val"}},"el-checkbox-group",e.bindAttrs,!1),e._l(e.item.options,(function(t){return i("el-checkbox",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1)},staticRenderFns:[]},(function(e){e&&e("data-v-fcdafaaa_0",{source:".form-input-box[data-v-fcdafaaa] .el-input-group__prepend,.single-input .form-input-box[data-v-fcdafaaa] .el-input-group__append{padding:0 10px}",map:void 0,media:void 0})}),{name:"Formcheckbox",mixins:[e],data:()=>({prependMsg:"",appendMsg:""}),computed:{textModelValue(){const e=this.item.options&&this.item.options.find(e=>e.value===this.val);return e&&e.label||""},val:{get(){return this.value},set(e){this.$emit("input",e),this._valueLink(e),"childForm"!==this.formItemType?this.statusChangeFn.valueUpdateEvent({[this.item.key]:e}):this.childChangeData.valueUpdateEvent()}}},watch:{item:{handler(e){e.prefixMsg&&(this.prependMsg=e.prefixMsg),e.suffixMsg&&(this.appendMsg=e.suffixMsg)},immediate:!0}}},"data-v-fcdafaaa",!1,void 0,!1,s,void 0,void 0);const F=t({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form-item-box",class:e.getClass(),style:e.item.valueWrapStyle||{}},[e.getTextModel?i("div",{style:e.item.textStyle||{}},[e._v("\n    "+e._s(e.dealInputValue||"-")+"\n    "+e._s(e.append)+"\n  ")]):[i("el-input",e._b({staticClass:"input-wr",style:e.item.valueBoxStyle||{},attrs:{placeholder:e.getPlaceholder(e.item),disabled:e.getDisabled,type:"number",clearable:!0},on:{blur:function(t){return e.onBlur(e.item,t)},focus:function(t){return e.onFocus(e.item,t)}},nativeOn:{keydown:function(t){return e.onKeydown(t)}},model:{value:e.tempVal,callback:function(t){e.tempVal="string"==typeof t?t.trim():t},expression:"tempVal"}},"el-input",e.bindAttrs,!1),[i("template",{slot:"append"},[e._v(e._s(e.append))])],2),e._v(" "),i("el-input",e._b({staticClass:"input-readonly",attrs:{placeholder:e.getPlaceholder(e.item),disabled:e.getDisabled,type:"input",clearable:!0},model:{value:e.dealInputValue,callback:function(t){e.dealInputValue="string"==typeof t?t.trim():t},expression:"dealInputValue"}},"el-input",e.bindAttrs,!1),[i("template",{slot:"append"},[e._v(e._s(e.append))])],2)]],2)},staticRenderFns:[]},(function(e){e&&e("data-v-050ac3fe_0",{source:".input-wr[data-v-050ac3fe]{z-index:100}.input-readonly[data-v-050ac3fe]{position:absolute;left:0;top:0}.is-wr .input-wr[data-v-050ac3fe]{opacity:1}.is-wr .input-readonly[data-v-050ac3fe]{display:none}.is-readonly .input-wr[data-v-050ac3fe]{opacity:0}",map:void 0,media:void 0})}),{name:"FormMoneyInput",mixins:[e],data:()=>({readonly:!0,tempVal:""}),computed:{dealInputValue(){if(""===this.value)return"";let e=String(this.value);"万元"===this.append&&(e=this.turnWanToYuan(e),e=this.throwPointRightZero(e));return e.toString().replace(/\d+/,e=>e.replace(/(\d)(?=(\d{3})+$)/g,e=>e+","))},append(){return this.item.append?this.item.append:this.item.suffixMsg?this.item.suffixMsg:"元"},val:{get(){if(""===this.value)return"";if("万元"===this.append){const e=String(this.value),t=this.turnWanToYuan(e);return this.throwPointRightZero(t)}return this.value},set(e){if(""===e)return this.$emit("input",e),void this.statusChangeFn.valueUpdateEvent({[this.item.key]:e});const t=Number(e);let i=String(t);this.item.positive&&i&&Number(i)<0&&(i="0"),"万元"===this.append&&(i=this.setNumberMultiplyTenThousands(i)),this.$emit("input",i),"childForm"!==this.formItemType?this.statusChangeFn.valueUpdateEvent({[this.item.key]:i}):this.childChangeData.valueUpdateEvent()}}},methods:{turnWanToYuan(e){if("0"===e||""===e)return e;if(e.indexOf(".")>-1){const t=e.split(".");if(t[0].length<5){let e="0.";for(let i=0;i<4-t[0].length;i++)e+="0";return e+=t[0],e+=t[1],e}return t[0].slice(0,-4)+"."+t[0].slice(-4)+t[1]}if(e.length<5){let t="0.";for(let i=0;i<4-e.length;i++)t+="0";return t+=e,t}return e.slice(0,-4)+"."+e.slice(-4)},setNumberMultiplyTenThousands(e){const t=String(e);if(-1===e.indexOf("."))return"0"!==t?t+"0000":"0";{const t=e.split(".");if(t[1].length<=4){let e=t[1];for(let i=0;i<4-t[1].length;i++)e+="0";return e=t[0]+e,this.throwPointLeftZero(e)}{const e=t[0]+t[1].slice(0,4)+"."+t[1].slice(4);return this.throwPointLeftZero(e)}}},getClass(){return{["quick-form-unqiue-"+this.item.key]:!0,[this.readonly?"is-readonly":"is-wr"]:!0}},onKeydown(e){!this.item.positive||"-"!==e.key&&"Minus"!==e.code||e.preventDefault()},onBlur(){if(this.readonly=!0,""===this.tempVal)return this.$emit("input",this.tempVal),void this.statusChangeFn.valueUpdateEvent({[this.item.key]:this.tempVal});let e=this.tempVal;if(this.item.zeroPadding&&this.item.zeroPadding>0){const t=String(e).split(".");if(1===t.length)0===t[0].length?e="":e+="."+"0".padEnd(this.item.zeroPadding,"0");else{const i=t[1].length;i<this.item.zeroPadding&&(e=t[0]+"."+t[1].padEnd(this.item.zeroPadding,"0")),i>this.item.zeroPadding&&(e=String(t[0])+"."+t[1].slice(0,this.item.zeroPadding))}}e=String(e),e=e.split(".").map((e,t)=>{if(0!==t)return e;const i=e.replace(/$0+/g,"");return 0===i.length?"0":i}).join("."),this.item.positive&&e<0&&(e=0),this.tempVal=this.throwPointLeftZero(this.tempVal),this.tempVal=this.throwPointRightZero(this.tempVal),this.val=e},onFocus(){const e=this.value;if("万元"===this.append){let t=this.turnWanToYuan(String(e));t=this.throwPointRightZero(t),this.tempVal=t}else this.tempVal=String(e);this.readonly=!1}}},"data-v-050ac3fe",!1,void 0,!1,s,void 0,void 0);const D=t({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form-item-box",class:e.getClass(),style:e.item.valueWrapStyle||{}},[e.getTextModel?i("div",{style:e.item.textStyle||{}},[e._v("\n    "+e._s(e.dealInputValue||"-")+"\n    "+e._s(e.append)+"\n  ")]):[i("el-input",e._b({staticClass:"input-wr",style:e.item.valueBoxStyle||{},attrs:{placeholder:e.getPlaceholder(e.item),disabled:e.getDisabled,type:"number",clearable:!0},on:{blur:function(t){return e.onBlur(e.item,t)},focus:function(t){return e.onFocus(e.item,t)}},nativeOn:{keydown:function(t){return e.onKeydown(t)}},model:{value:e.tempVal,callback:function(t){e.tempVal="string"==typeof t?t.trim():t},expression:"tempVal"}},"el-input",e.bindAttrs,!1),[i("template",{slot:"append"},[e._v(e._s(e.append))])],2),e._v(" "),i("el-input",e._b({staticClass:"input-readonly",attrs:{placeholder:e.getPlaceholder(e.item),disabled:e.getDisabled,type:"input",clearable:!0},model:{value:e.dealInputValue,callback:function(t){e.dealInputValue="string"==typeof t?t.trim():t},expression:"dealInputValue"}},"el-input",e.bindAttrs,!1),[i("template",{slot:"append"},[e._v(e._s(e.append))])],2)]],2)},staticRenderFns:[]},(function(e){e&&e("data-v-450a29a5_0",{source:".form-item-box[data-v-450a29a5] .el-input__inner{height:36px;line-height:36px}.input-wr[data-v-450a29a5]{z-index:100}.input-readonly[data-v-450a29a5]{position:absolute;left:0;top:0}.is-wr .input-wr[data-v-450a29a5]{opacity:1}.is-wr .input-readonly[data-v-450a29a5]{display:none}.is-readonly .input-wr[data-v-450a29a5]{opacity:0}",map:void 0,media:void 0})}),{name:"FormRateInput",mixins:[e],data:()=>({readonly:!0,tempVal:""}),computed:{dealInputValue(){if(""===this.value)return"";let e=String(this.value);"%"===this.append&&(e=this.multiplyHundred(e));return e.toString().replace(/\d+/,e=>e.replace(/(\d)(?=(\d{3})+$)/g,e=>e+","))},append(){return this.item.append?this.item.append:this.item.suffixMsg?this.item.suffixMsg:"%"},val:{get(){if(""===this.value)return"";if("%"===this.append){const e=String(this.value);return this.multiplyHundred(e)}return this.value},set(e){if(""===e)return this.$emit("input",e),void this.statusChangeFn.valueUpdateEvent({[this.item.key]:e});const t=Number(e);let i=String(t);this.item.positive&&i&&Number(i)<0&&(i="0"),"%"===this.append&&(i=this.turnHundredToDecimal(i)),this.$emit("input",i),"childForm"!==this.formItemType?this.statusChangeFn.valueUpdateEvent({[this.item.key]:i}):this.childChangeData.valueUpdateEvent()}}},methods:{stringDivide(e,t){if("number"!=typeof t&&t<=0)throw new Error("入参不合法。参数必须是数字，并且大于 0");if("0"===e||""===e||!e)return e;if(e.indexOf(".")>-1){const i=e.split(".");if(i[0].length<t+1){let e="0.";for(let a=0;a<t-i[0].length;a++)e+="0";e+=i[0],e+=i[1];let a=this.throwPointLeftZero(e);return a=this.throwPointRightZero(a),a}{const e=i[0].slice(0,-1*t)+"."+i[0].slice(-1*t)+i[1];let a=this.throwPointLeftZero(e);return a=this.throwPointRightZero(a),a}}if(e.length<t+1){let i="0.";for(let a=0;a<t-e.length;a++)i+="0";i+=e;let a=this.throwPointLeftZero(i);return a=this.throwPointRightZero(a),a}{const i=e.slice(0,-1*t)+"."+e.slice(-1*t);let a=this.throwPointLeftZero(i);return a=this.throwPointRightZero(a),a}},turnHundredToDecimal(e){return this.stringDivide(e,2)},stringMultiply(e,t){if("number"!=typeof t&&t<=0)throw new Error("入参不合法。参数必须是数字，并且大于 0");if("0"===e||""===e||!e)return e;let i=String(e);if(-1===e.indexOf(".")){if("0"!==i){for(let e=0;e<t;e++)i+="0";return this.throwPointLeftZero(i)}return"0"}{const i=e.split(".");if(i[1].length<=t){let e=i[1];for(let a=0;a<t-i[1].length;a++)e+="0";e=i[0]+e;let a=this.throwPointLeftZero(e);return a=this.throwPointRightZero(a),a}{const e=i[0]+i[1].slice(0,t)+"."+i[1].slice(t);let a=this.throwPointLeftZero(e);return a=this.throwPointRightZero(a),a}}},multiplyHundred(e){return this.stringMultiply(e,2)},getClass(){return{["quick-form-unqiue-"+this.item.key]:!0,[this.readonly?"is-readonly":"is-wr"]:!0}},onKeydown(e){!this.item.positive||"-"!==e.key&&"Minus"!==e.code||e.preventDefault()},onBlur(){if(this.readonly=!0,""===this.tempVal)return this.$emit("input",this.tempVal),void this.statusChangeFn.valueUpdateEvent({[this.item.key]:this.tempVal});let e=this.tempVal;if(this.item.zeroPadding&&this.item.zeroPadding>0){const t=String(e).split(".");if(1===t.length)0===t[0].length?e="":e+="."+"0".padEnd(this.item.zeroPadding,"0");else{const i=t[1].length;i<this.item.zeroPadding&&(e=t[0]+"."+t[1].padEnd(this.item.zeroPadding,"0")),i>this.item.zeroPadding&&(e=String(t[0])+"."+t[1].slice(0,this.item.zeroPadding))}}e=String(e),e=e.split(".").map((e,t)=>{if(0!==t)return e;const i=e.replace(/$0+/g,"");return 0===i.length?"0":i}).join("."),this.item.positive&&e<0&&(e=0),this.tempVal=this.throwPointLeftZero(this.tempVal),this.tempVal=this.throwPointRightZero(this.tempVal),this.val=e},onFocus(){this.tempVal=this.multiplyHundred(String(this.value)),this.readonly=!1}},watch:{item:{handler(){this.readonly=!0},immediate:!0}}},"data-v-450a29a5",!1,void 0,!1,s,void 0,void 0);const S=t({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form-input-box form-item-box",class:"quick-form-unqiue-"+e.item.key,style:e.item.valueWrapStyle||{}},[e.getTextModel?i("div",{staticClass:"form-input-text",style:e.item.textStyle||{}},[e._v("\n    "+e._s(e.areaText)+"\n  ")]):i("el-row",[i("el-col",{attrs:{span:8}},[i("el-select",{staticClass:"select",style:e.item.valueBoxStyle||{},attrs:{placeholder:"请选择",disabled:e.getDisabled},on:{change:function(t){return e.onChange(t,"0")}},model:{value:e.val[0],callback:function(t){e.$set(e.val,0,t)},expression:"val[0]"}},e._l(e.dynamicDict[e.item.firstParentKey||"10020"],(function(t){return i("el-option",{key:t[e.dynamicSelectOption.value],attrs:{label:t[e.dynamicSelectOption.label],value:t[e.dynamicSelectOption.value]}})})),1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-select",{staticClass:"select",style:e.item.valueBoxStyle||{},attrs:{placeholder:"请选择",disabled:e.getDisabled},on:{change:function(t){return e.onChange(t,"1")}},model:{value:e.val[1],callback:function(t){e.$set(e.val,1,t)},expression:"val[1]"}},e._l(e.cityList,(function(t){return i("el-option",{key:t[e.dynamicSelectOption.value],attrs:{label:t[e.dynamicSelectOption.label],value:t[e.dynamicSelectOption.value]}})})),1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-select",{staticClass:"select",style:e.item.valueBoxStyle||{},attrs:{placeholder:"请选择",disabled:e.getDisabled},model:{value:e.val[2],callback:function(t){e.$set(e.val,2,t)},expression:"val[2]"}},e._l(e.areaList,(function(t){return i("el-option",{key:t[e.dynamicSelectOption.value],attrs:{label:t[e.dynamicSelectOption.label],value:t[e.dynamicSelectOption.value]}})})),1)],1)],1)],1)},staticRenderFns:[]},(function(e){e&&e("data-v-69821f6e_0",{source:".form-input-box[data-v-69821f6e] .el-input{position:relative;width:100%;height:36px}.form-input-box[data-v-69821f6e] .el-input .el-input__inner{height:36px;line-height:36px}.form-input-text[data-v-69821f6e]{position:relative;width:100%;height:36px;line-height:36px;font-size:14px;color:#12182a}.select[data-v-69821f6e]{width:100%}",map:void 0,media:void 0})}),{name:"FormAreaSelect",mixins:[e],data:()=>({prependMsg:"",appendMsg:""}),computed:{cityList(){const e=this.item.secondParentKey||"10021";return this.val[0]?this.dynamicDict[e].filter(e=>e.bparentCode===this.val[0]):[]},areaList(){const e=this.item.thirdParentKey||"10022";return this.val[1]?this.dynamicDict[e].filter(e=>e.bparentCode===this.val[1]):[]},areaText(){const e=this.item.firstParentKey||"10020",t=this.item.secondParentKey||"10021",i=this.item.thirdParentKey||"10022";return`${this.getText(e,this.val[0])}${this.getText(t,this.val[1])}${this.getText(i,this.val[2])}`}},methods:{onChange(e,t){"0"===t&&(this.val[1]="",this.val[2]=""),"1"===t&&(this.val[2]="")},getText(e,t){if(this.val[0]){const i=this.dynamicDict[e].filter(e=>e[this.dynamicSelectOption.value]===t);return 0===i.length?"":i[0][this.dynamicSelectOption.label]}return""}}},"data-v-69821f6e",!1,void 0,!1,s,void 0,void 0),w=require("axios");const C=t({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form-item-box",class:"quick-form-unqiue-"+e.item.key,style:e.item.valueWrapStyle||{}},[e.getTextModel?i("div",{style:e.item.textStyle||{}},[e._v(e._s(e.textModelValue()))]):i("el-row",e._l(e.item.linkLevel||3,(function(t){return i("el-col",{key:t,attrs:{span:24/(e.item.linkLevel||3)}},[i("el-select",{staticStyle:{width:"100%"},style:e.item.valueBoxStyle||{},attrs:{disabled:e.getDisabled,placeholder:e.getSelectPlaceholder(e.item)},on:{change:function(i){return e.onChange(i,t)}},model:{value:e.val[t-1],callback:function(i){e.$set(e.val,t-1,i)},expression:"val[i - 1]"}},e._l(e.getOptions(t),(function(t){return i("el-option",{key:t[e.dynamicSelectOption.value],attrs:{label:t[e.dynamicSelectOption.label],value:t[e.dynamicSelectOption.value]}})})),1)],1)})),1)],1)},staticRenderFns:[]},(function(e){e&&e("data-v-d8d615f8_0",{source:".form-item-box[data-v-d8d615f8] .el-input{position:relative;width:100%;height:36px}.form-item-box[data-v-d8d615f8] .el-input .el-input__inner{position:absolute;width:100%;height:36px;line-height:36px;padding-right:10px;padding-left:12px}",map:void 0,media:void 0})}),{name:"FormMulLinkage",mixins:[e],data:()=>({hasLoaded:!0}),watch:{item:{handler(){this.hasLoaded=!1},immediate:!1},val:{handler(){this.hasLoaded=!1},immediate:!1},"item.linkLevel":{handler(){this.initVal()},immediate:!0}},created(){this.loadDict(this.item.firstParentKey)},computed:{val:{get(){return this.value},set(e){this.$emit("input",e),"childForm"!==this.formItemType?this.statusChangeFn.valueUpdateEvent({[this.item.key]:e}):this.childChangeData.valueUpdateEvent()}}},methods:{getTextModelValueList(){const e=[];this.dynamicDict[this.item.firstParentKey]&&0!==this.dynamicDict[this.item.firstParentKey].length||e.push(this.item.firstParentKey),this.val&&this.val instanceof Array&&this.val.forEach(t=>{t&&(this.dynamicDict[t]&&0!==this.dynamicDict[t].length||e.push(t))}),this.hasLoaded=!0,this.loadDict(e)},textModelValue(){const e=new Array(this.item.linkLevel).fill("");let t=!1;for(let i=0;i<this.item.linkLevel;i++){const a=this.val[i];let n="";if(n=0===i?this.item.firstParentKey:this.val[i-1],this.dynamicDict[n]&&this.dynamicDict[n].length>0){let t="",s=!1;this.dynamicDict[n].forEach(e=>{e[this.dynamicSelectOption.value]===a&&(s=!0,t=e[this.dynamicSelectOption.label])}),s||(t=a),e[i]=t}else e[i]=a,t=!0}return t&&!this.hasLoaded&&this.getTextModelValueList(),e.join("")||"-"},initVal(){this.$emit("input",new Array(this.item.linkLevel||3).fill(""))},getOptions(e){return"1"===String(e)?this.dynamicDict[this.item.firstParentKey]||[]:this.dynamicDict[this.val[e-2]]||[]},loadDict(e){let t=null;t=this.dynamicSelectOption.queryKey?e instanceof Array?{[this.dynamicSelectOption.queryKey]:[...e]}:{[this.dynamicSelectOption.queryKey]:[e]}:e instanceof Array?[...e]:[e],this.$set(this.dynamicDict,e,[]),w.post(this.dynamicSelectOption.dictUrl,t).then(t=>{let i;if(i=t.request&&t.headers?t.data:t,200===i.status||0===i.status){if(i.data.length>0){let t;t=e instanceof Array?[...e]:[e],t.forEach(e=>{(!this.dynamicDict[e]||this.dynamicDict[e].length>0)&&this.$set(this.dynamicDict,e,[])}),i.data.forEach(e=>{const t=e[this.dynamicSelectOption.parentKey];this.dynamicDict[t].push(e)}),this.$forceUpdate()}}else this.$message.error(i.msg)}).catch(e=>{console.log(e),this.$message.error("数据字典加载错误，请刷新页面重试")})},onChange(e,t){for(let e=t;e<this.item.linkLevel;e++)this.val[e]="";t!==this.item.linkLevel&&(this.dynamicDict[e]&&this.dynamicDict[e].length>0||this.loadDict(e))}}},"data-v-d8d615f8",!1,void 0,!1,s,void 0,void 0);const I=t({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form-input-box form-item-box",class:"quick-form-unqiue-"+e.item.key,style:e.item.valueWrapStyle||{}},[e.getTextModel?i("div",{staticClass:"form-input-text",style:e.item.textStyle||{}},[e.prepend?i("span",{staticClass:"prepend-msg"},[e._v(e._s(e.prepend))]):e._e(),e._v(" "),i("span",{staticClass:"text"},[e._v(e._s(e.val||"-"))]),e._v(" "),e.append?i("span",{staticClass:"append-msg"},[e._v(e._s(e.append))]):e._e()]):i("el-input",e._b({style:e.item.valueBoxStyle||{},attrs:{placeholder:e.getPlaceholder(e.item),disabled:e.getDisabled,type:"number",clearable:!0},on:{blur:function(t){return e.onBlur(e.item,t)},focus:function(t){return e.onFocus(e.item,t)}},model:{value:e.val,callback:function(t){e.val="string"==typeof t?t.trim():t},expression:"val"}},"el-input",e.bindAttrs,!1),[e.prepend?i("template",{slot:"prepend"},[e._v(e._s(e.prepend))]):e._e(),e._v(" "),e.append?i("template",{slot:"append"},[e._v(e._s(e.append))]):e._e()],2)],1)},staticRenderFns:[]},void 0,{name:"FormNormalNumber",mixins:[e],computed:{prepend(){return this.item.prepend?this.item.prepend:""},append(){return this.item.append?this.item.append:""}}},"data-v-8f5839c2",!1,void 0,!1,void 0,void 0,void 0);const E=t({render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"form-item-box",class:"quick-form-unqiue-"+this.item.key,style:this.item.style||{}},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:this.value,border:"","header-cell-style":this.headerStyle}},this._l(this.item.headerList,(function(e,i){return t("el-table-column",{key:i,attrs:{prop:e.prop,label:e.label,align:"center"}})})),1)],1)},staticRenderFns:[]},(function(e){e&&e("data-v-4fd256fd_0",{source:".form-item-box[data-v-4fd256fd]{margin-bottom:20px}",map:void 0,media:void 0})}),{name:"TableReadonly",props:{item:{type:Object,default:()=>({})},value:{type:Array,default:()=>[]}},data:()=>({}),methods:{headerStyle(){const e={background:"#F7F8FB",fontFamily:"PingFangSC-Semibold",fontSize:"14px",color:"#12182A",fontWeight:"600"};return e}}},"data-v-4fd256fd",!1,void 0,!1,s,void 0,void 0),$=e=>Object.prototype.toString.call(e).toLowerCase().replace(/^\[object\s(\w+)\]$/,(...e)=>e[1]);var L={props:{allDisabled:{type:Boolean,default:!1},borderForm:{type:Boolean,default:!0},textModel:{type:Boolean,default:!1},formItemCol:{type:[Number,String],default:12},labelPosition:{type:String,default:"top"},labelWidth:{type:String,default:"160px"}},methods:{getBlockClass(e){const t=e.class;return Object.assign({},t,{"block-item":this.borderForm})},getFormItemLabel(e){return!this.textModel||"left"!==this.labelPosition&&"right"!==this.labelPosition?e.label:e.label+"："},getColSize(e){return"child-form"===e.type?24:e.span||this.formItemCol||e.size||12},deepCopy(e){const t=["object","array"];if(!t.includes($(e)))return"必须传入对象";const i=Array.isArray(e)?[]:{};for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t.includes($(e[a]))?i[a]=this.deepCopy(e[a]):i[a]=e[a]);return i}}};const M=require("axios");const P=t({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"child-form-container"},[e._l(e.childFormFileds,(function(t,a){return i("div",{key:a,staticClass:"child-form"},[i("div",{staticClass:"child-form-head"},[e._v("\n      "+e._s(e.item.headerLabel)+e._s(a+1)+"\n      "),-1===e.foldList.indexOf(t.randomId)?i("svg",{staticClass:"cfh-flod",attrs:{viewBox:"0 0 16 8",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"8"},on:{click:function(){return e.flodChildField(t.randomId)}}},[i("path",{attrs:{d:"M0 0 L16 0 L8 8 Z",fill:"#777B88"}})]):e._e(),e._v(" "),e.foldList.indexOf(t.randomId)>-1?i("svg",{staticClass:"cfh-unflod",attrs:{viewBox:"0 0 16 8",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"8"},on:{click:function(){return e.flodChildField(t.randomId)}}},[i("path",{attrs:{d:"M0 8 L16 8 L8 0 Z",fill:"#777B88"}})]):e._e(),e._v(" "),e.textModel?e._e():i("div",{staticClass:"cfh-del",on:{click:function(){return e.allDisabled?"":e.deleteChildForm(t.randomId)}}},[i("img",{staticClass:"cfh-del-btn",attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAxUlEQVR42uWSsQ0CMQxFbwYKJmAGmAI2oENsglgg9onEUFBSxLkOalo6pkCIGeB+ER0KKEeRjkhfsvxffhwlVfHF22ZGVs/k9PIu9OD1BhjnH+yUWy0TMbyvm0SOA5awAGisf7LzqzQAPXiowWJPd+ouTMj6G1m9Y9ycwICtRcfJ6LqB8hfsuKxB0oyM6Dx6qNH7OQD3xLjRQ43ePwWQhClZ1eihRi/lyj4jubAm568YNScwYD8C6v1p2JqHvp8IBmxVar0AUiAwjfTBZFwAAAAASUVORK5CYII="}}),e._v(" "),i("span",{staticClass:"cfh-del-text"},[e._v("删除")])])]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:-1===e.foldList.indexOf(t.randomId),expression:"foldList.indexOf(childField.randomId) === -1"}],staticClass:"child-form-body"},[i("el-form",{ref:"form",refInFor:!0,attrs:{model:e.val[a],"hide-required-asterisk":e.textModel,"label-width":e.labelWidth||"130px","label-position":e.labelPosition?e.labelPosition:"top"}},[e._l(e.getFieldRow(t,t.randomId),(function(n,s){var l;return[i("el-row",{key:s,staticClass:"block-content",class:(l={},l[t.randomId]=!0,l),attrs:{gutter:20}},[e._l(n,(function(n){var s=n.rowItem;return[i("div",{key:s.key},[i("el-col",{key:s.key,style:s.style||{},attrs:{span:e.getColSize(s)}},["child-form"!==s.type?i("el-form-item",{class:s.class,style:s.style,attrs:{rules:s.rules,label:e.getFormItemLabel(s),prop:s.key}},["input"===s.type?i("FormInput",e._b({attrs:{"random-id":t.randomId},model:{value:e.val[a][s.key],callback:function(t){e.$set(e.val[a],s.key,"string"==typeof t?t.trim():t)},expression:"val[index][rowItem.key]"}},"FormInput",e.getProps(s),!1)):e._e(),e._v(" "),"date-input"===s.type?i("FormDate",e._b({attrs:{"random-id":t.randomId},model:{value:e.val[a][s.key],callback:function(t){e.$set(e.val[a],s.key,"string"==typeof t?t.trim():t)},expression:"val[index][rowItem.key]"}},"FormDate",e.getProps(s),!1)):e._e(),e._v(" "),"hour-minute-input"===s.type?i("FormHourMinute",e._b({attrs:{"random-id":t.randomId},model:{value:e.val[a][s.key],callback:function(t){e.$set(e.val[a],s.key,"string"==typeof t?t.trim():t)},expression:"val[index][rowItem.key]"}},"FormHourMinute",e.getProps(s),!1)):e._e(),e._v(" "),"date-range-input"===s.type?i("FormDateRange",e._b({attrs:{"random-id":t.randomId},model:{value:e.val[a][s.key],callback:function(t){e.$set(e.val[a],s.key,"string"==typeof t?t.trim():t)},expression:"val[index][rowItem.key]"}},"FormDateRange",e.getProps(s),!1)):e._e(),e._v(" "),"dynamic-select"===s.type?i("FormDictSelect",e._b({attrs:{"random-id":t.randomId},model:{value:e.val[a][s.key],callback:function(t){e.$set(e.val[a],s.key,"string"==typeof t?t.trim():t)},expression:"val[index][rowItem.key]"}},"FormDictSelect",e.getProps(s),!1)):e._e(),e._v(" "),"normal-select"===s.type?i("FormNormalSelect",e._b({attrs:{"random-id":t.randomId},model:{value:e.val[a][s.key],callback:function(t){e.$set(e.val[a],s.key,"string"==typeof t?t.trim():t)},expression:"val[index][rowItem.key]"}},"FormNormalSelect",e.getProps(s),!1)):e._e(),e._v(" "),"mutiple-select"===s.type?i("FormMutipleSelect",e._b({attrs:{"random-id":t.randomId},model:{value:e.val[a][s.key],callback:function(t){e.$set(e.val[a],s.key,"string"==typeof t?t.trim():t)},expression:"val[index][rowItem.key]"}},"FormMutipleSelect",e.getProps(s),!1)):e._e(),e._v(" "),"number-input"===s.type?i("FormNumberInput",e._b({attrs:{"random-id":t.randomId},model:{value:e.val[a][s.key],callback:function(t){e.$set(e.val[a],s.key,"string"==typeof t?t.trim():t)},expression:"val[index][rowItem.key]"}},"FormNumberInput",e.getProps(s),!1)):e._e(),e._v(" "),"auto-complete-input"===s.type?i("FormAutoComplete",e._b({attrs:{"random-id":t.randomId},model:{value:e.val[a][s.key],callback:function(t){e.$set(e.val[a],s.key,"string"==typeof t?t.trim():t)},expression:"val[index][rowItem.key]"}},"FormAutoComplete",e.getProps(s),!1)):e._e(),e._v(" "),"radio"===s.type?i("FormRadio",e._b({attrs:{"random-id":t.randomId},model:{value:e.val[a][s.key],callback:function(t){e.$set(e.val[a],s.key,"string"==typeof t?t.trim():t)},expression:"val[index][rowItem.key]"}},"FormRadio",e.getProps(s),!1)):e._e(),e._v(" "),"textarea"===s.type?i("FormTextarea",e._b({attrs:{"random-id":t.randomId},model:{value:e.val[a][s.key],callback:function(t){e.$set(e.val[a],s.key,t)},expression:"val[index][rowItem.key]"}},"FormTextarea",e.getProps(s),!1)):e._e(),e._v(" "),"money-input"===s.type?i("FormMoneyInput",e._b({attrs:{"random-id":t.randomId},model:{value:e.val[a][s.key],callback:function(t){e.$set(e.val[a],s.key,"string"==typeof t?t.trim():t)},expression:"val[index][rowItem.key]"}},"FormMoneyInput",e.getProps(s),!1)):e._e(),e._v(" "),"rate-input"===s.type?i("FormRateInput",e._b({attrs:{"random-id":t.randomId},model:{value:e.val[a][s.key],callback:function(t){e.$set(e.val[a],s.key,"string"==typeof t?t.trim():t)},expression:"val[index][rowItem.key]"}},"FormRateInput",e.getProps(s),!1)):e._e(),e._v(" "),"mul-linkage"===s.type?i("FormMulLinkage",e._b({attrs:{"random-id":t.randomId},model:{value:e.val[s.key],callback:function(t){e.$set(e.val,s.key,"string"==typeof t?t.trim():t)},expression:"val[rowItem.key]"}},"FormMulLinkage",e.getProps(s),!1)):e._e(),e._v(" "),"normal-number"===s.type?i("FormNormalNumberInput",e._b({attrs:{"random-id":t.randomId},model:{value:e.val[s.key],callback:function(t){e.$set(e.val,s.key,"string"==typeof t?t.trim():t)},expression:"val[rowItem.key]"}},"FormNormalNumberInput",e.getProps(s),!1)):e._e()],1):e._e()],1)],1)]}))],2)]}))],2)],1)])})),e._v(" "),e.textModel?e._e():i("div",{staticClass:"child-form-add-btn",on:{click:function(){return e.allDisabled?"":e.addChildForm()}}},[e._v("\n    ＋ "+e._s(e.item.headerLabel)+"\n  ")])],2)},staticRenderFns:[]},(function(e){e&&e("data-v-8b73097a_0",{source:".child-form-container[data-v-8b73097a]{width:100%}.child-form-container .child-form[data-v-8b73097a]{background:#f8f9fb;border-radius:4px;margin-bottom:24px}.child-form-container .child-form .child-form-head[data-v-8b73097a]{position:relative;height:44px;line-height:44px;text-align:left;padding:0 20px;font-size:14px;color:#3a4566;border-bottom:1px solid #e7e8eb;font-weight:500}.child-form-container .child-form .child-form-head .cfh-flod[data-v-8b73097a],.child-form-container .child-form .child-form-head .cfh-unflod[data-v-8b73097a]{position:absolute;top:16px;right:20px;width:12px;height:6px;cursor:pointer;user-select:none}.child-form-container .child-form .child-form-head .cfh-del[data-v-8b73097a]{position:absolute;top:0;right:60px;height:40px;line-height:40px;cursor:pointer;user-select:none}.child-form-container .child-form .child-form-head .cfh-del .cfh-del-btn[data-v-8b73097a]{position:relative;height:16px;width:16px;margin-top:12px;vertical-align:top}.child-form-container .child-form .child-form-head .cfh-del .cfh-del-text[data-v-8b73097a]{display:inline-block;position:relative;height:40px;line-height:40px;vertical-align:top;font-size:14px;color:#949aae;font-weight:400}.child-form-container .child-form .child-form-body[data-v-8b73097a]{padding:0 20px}.child-form-container .child-form-add-btn[data-v-8b73097a]{position:relative;width:100%;height:40px;line-height:40px;background:#fbfcfd;border:1px dashed #abb3cc;border-radius:4px;text-align:center;font-size:14px;color:#12182a;cursor:pointer}",map:void 0,media:void 0})}),{name:"ChildForm",mixins:[L],props:{item:{type:Object,default:()=>({})},value:{type:Array,default:()=>[]}},computed:{val:{get(){return this.value},set(e){this.$emit("input",e)}}},inject:["changeData","statusChangeFn","dynamicDict","dynamicSelectOption"],watch:{value(e,t){this.value&&0!==this.value.length?e!==t&&this.resetChildFormFileds():(this.childFormFileds=[],this.addChildForm())}},mounted(){this.value&&this.value instanceof Array&&this.value.length>0?this.value.forEach(e=>{this.addChildForm(e)}):this.addChildForm(),this.loadDynamicSelectOptions()},data(){return{childFormFileds:[],foldList:[],childFormHiddenList:[],childFormDisableList:[],childChangeData:{formKey:this.item.key,updateFormData:this.updateFormData,valueUpdateEvent:this.valueUpdateEvent,setElementRequired:this.setElementRequired}}},provide(){return{formItemType:"childForm",childChangeData:this.childChangeData}},methods:{valueUpdateEvent(){},loadDynamicSelectOptions(){const e=[];if(this.childFormFileds.forEach(t=>{t&&t instanceof Array&&t.forEach(t=>{if("dynamic-select"===t.type&&t.parentKey&&-1===e.indexOf(t.parentKey)&&(this.dynamicDict[t.parentKey]||(e.push(t.parentKey),this.$set(this.dynamicDict,t.parentKey,[]))),"area-select"===t.type){const i=t.firstParentKey||"10020",a=t.firstParentKey||"10021",n=t.firstParentKey||"10022";-1===e.indexOf(i)&&(this.dynamicDict[i]||(e.push(i),this.$set(this.dynamicDict,i,[]))),-1===e.indexOf(a)&&(this.dynamicDict[a]||(e.push(a),this.$set(this.dynamicDict,a,[]))),-1===e.indexOf(n)&&(this.dynamicDict[n]||(e.push(n),this.$set(this.dynamicDict,n,[])))}})}),0===e.length)return;let t=null;t=this.dynamicSelectOption.queryKey?{[this.dynamicSelectOption.queryKey]:e}:e,M.post(this.dynamicSelectOption.dictUrl,t).then(t=>{let i;i=t.request&&t.headers?t.data:t,200===i.code?i.data.length>0&&(e.forEach(e=>{this.dynamicDict[e].length>0&&this.$set(this.dynamicDict,e,[])}),i.data.forEach(e=>{const t=e[this.dynamicSelectOption.parentKey];this.dynamicDict[t].push(e)})):this.$message.error(i.msg)}).catch(()=>{this.$message.error("数据字典加载错误，请刷新页面重试")})},addChildForm(e){const{childrenForm:t}=this.item,i=this.deepCopy(t),a=(1e8*Math.random()).toFixed(0);i.randomId=a,this.childFormFileds.push(i);const n=[],s=[],l={};t.forEach(t=>{e&&t.key in e?l[t.key]=e[t.key]:l[t.key]=t.defaultValue||"",t.disableDefault&&n.push(t.key),t.hiddenDefault&&s.push(t.key)}),this.val.push(l);const o=this.item.key;n.forEach(e=>{const t=`${o}_${a}_${e}`;this.statusChangeFn.setElementDisable(t)}),s.forEach(e=>{const t=`${o}_${a}_${e}`;this.statusChangeFn.setElementHidden(t)})},isShow(e,t){const i=`${this.item.key}_${t}_${e.key}`;return!(this.changeData.hiddenKeyList.indexOf(i)>-1)},getFieldRow(e,t){const i=[];return e?(e.forEach(e=>{if(!this.isShow(e,t))return;const a=this.getColSize(e);if(0===i.length){const n={span:a,rowItem:Object.assign({},e,{randomId:t})};return void i.push([n])}if(e.nextRowFirst||"child-form"===e.type){const n={span:a,rowItem:Object.assign({},e,{randomId:t})};return void i.push([n])}const n=i[i.length-1];if(n[n.length-1].rowItem.currentRowLast){const n={span:a,rowItem:Object.assign({},e,{randomId:t})};return void i.push([n])}const s=i[i.length-1].map(e=>e.span).reduce((e,t)=>e+t);if(s>=24||s+a>24){const n={span:a,rowItem:Object.assign({},e,{randomId:t})};i.push([n])}else{const n={span:a,rowItem:Object.assign({},e,{randomId:t})};i[i.length-1].push(n)}}),i):i},updateFormData(e,t){let i=-1;this.childFormFileds.forEach((e,a)=>{e.randomId===t&&(i=a)}),Object.keys(e).forEach(t=>{t in this.value[i]&&this.$set(this.value[i],t,e[t])})},setElementRequired(e,t,i=!0){const a=this.childFormFileds.filter(e=>e.randomId===t)[0];i?a&&a instanceof Array&&a.forEach(t=>{if(t.key!==e)return;if(!t.rules)return void this.$set(t,"rules",[{required:!0,message:"请输入",trigger:["blur","change"]}]);const{rules:i}=t;let a=!1,n=!1;i.forEach(e=>{if("required"in e){if(a=!0,e.required)return;e.required=!0,n=!0}}),n||a||i.push({required:!0,message:"请输入",trigger:["blur","change"]})}):a&&a instanceof Array&&a.forEach(t=>{if(t.key!==e)return;if(!t.rules)return;let i=-1;t.rules.forEach((e,t)=>{"required"in e&&(i=t)}),-1!==i&&t.rules.splice(i,1)})},validateForm(){return new Promise((e,t)=>{Promise.all(this.$refs.form.map(e=>this.validateItem(e))).then(e).catch(t)})},validateItem:e=>new Promise((t,i)=>{e.validate(e=>{e?t():i()})}),flodChildField(e){const t=this.foldList.indexOf(e);t>-1?this.foldList.splice(t,1):this.foldList.push(e)},deleteChildForm(e){if(this.allDisabled)return;let t=-1;this.childFormFileds.forEach((i,a)=>{i.randomId===e&&(t=a,i.forEach(t=>{const i=this.item.key,a=t.key,n=`${i}_${e}_${a}`;this.statusChangeFn.setElementHidden(n,!1),this.statusChangeFn.setElementDisable(n,!1)}))}),this.childFormFileds.splice(t,1),this.val.splice(t,1),this.valueUpdateEvent(),0===this.val.length&&this.addChildForm()},resetChildFormFileds(){const{childrenForm:e}=this.item;this.childFormFileds=[],this.value.forEach(()=>{const t=this.deepCopy(e),i=(1e8*Math.random()).toFixed(0);t.randomId=i,this.childFormFileds.push(t)})},resetFields(){const{childrenForm:e}=this.item,t={};e.forEach(e=>{t[e.key]=e.defaultValue||""}),this.value.forEach(e=>{Object.keys(e).forEach(i=>{this.$set(e,i,t[i]),e[i]=t[i]})})},getProps(e){return{item:e,allDisabled:this.allDisabled}}},components:{FormInput:i,FormDictSelect:d,FormDate:p,FormHourMinute:v,FormDateRange:y,FormNumberInput:k,FormAutoComplete:b,FormRadio:x,FormTextarea:r,FormNormalSelect:m,FormMutipleSelect:u,FormMoneyInput:F,FormRateInput:D,FormMulLinkage:C,FormNormalNumberInput:I}},"data-v-8b73097a",!1,void 0,!1,s,void 0,void 0),O=require("axios");const R=t({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"quick-form quick-form-v2",class:{"border-form":e.borderForm}},[e.showAllFoldBtn||e.showScanTypeBtn?i("div",{staticClass:"scan-type"},[e.showAllFoldBtn&&"normal"===e.scanType?i("div",{staticClass:"all-fold-btn",on:{click:e.foldAllBlock}},[e._v("\n      全部收起/展开\n    ")]):e._e(),e._v(" "),e.showScanTypeBtn&&"single"===e.scanType?i("div",{staticClass:"block-btn-list"},[e._l(e.fields,(function(t){return[t.label?i("div",{key:t.label,staticClass:"block-btn",class:{focus:e.singleScanBlock===t.label},on:{click:function(){return e.singleScanBlock=t.label}}},[e._v("\n          "+e._s(t.label)+"\n        ")]):e._e()]}))],2):e._e(),e._v(" "),e.showScanTypeBtn?i("div",{staticClass:"scan-type-btn",on:{click:e.changeScanType}},[e._v("\n      浏览模式切换\n    ")]):e._e()]):e._e(),e._v(" "),e.showRowsFold?i("div",{staticClass:"table-query-fold"},[i("el-button",{attrs:{type:"text",icon:e.tableQueryFoldStatus?"el-icon-arrow-down":"el-icon-arrow-up"},on:{click:e.toggleShow}},[e._v(e._s(e.tableQueryFoldStatus?" 展开更多":"收起更多"))])],1):e._e(),e._v(" "),i("el-form",{ref:"form",attrs:{model:e.formData,"hide-required-asterisk":e.textModel,"label-width":e.labelWidth||"150px","label-position":e.labelPosition?e.labelPosition:"right"}},e._l(e.currentFileds,(function(t){return i("div",{key:t.label},["normal"===e.scanType||"single"===e.scanType&&e.singleScanBlock===t.label?i("div",{class:e.getBlockClass(t),style:t.style},[t.label?i("div",{staticClass:"block-title"},[i("div",{staticClass:"block-line"}),e._v(" "),i("span",{staticClass:"block-text",attrs:{id:t.id||String(1e4*Math.random())}},[e._v(e._s(t.label))]),e._v(" "),-1===e.foldBlockList.indexOf(t.label)&&e.showFoldBtn&&!e.textModel&&"normal"===e.scanType?i("span",{staticClass:"block-fold-btn",on:{click:function(i){return e.foldBlock(t)}}},[e._v("\n            收起 "),i("i",{staticClass:"el-icon-arrow-up"})]):e._e(),e._v(" "),e.foldBlockList.indexOf(t.label)>-1&&e.showFoldBtn&&!e.textModel&&"normal"===e.scanType?i("span",{staticClass:"block-fold-btn",on:{click:function(i){return e.foldBlock(t)}}},[e._v("\n            展开 "),i("i",{staticClass:"el-icon-arrow-down"})]):e._e()]):e._e(),e._v(" "),e._l(e.getFieldRow(t.children),(function(a,n){return[i("el-row",{key:n,staticClass:"block-content",class:{"block-hidden":e.foldBlockList.indexOf(t.label)>-1||"tableQuery"===e.mode&&n+1>e.tableQueryshowRows},attrs:{gutter:20}},[e._l(a,(function(t){var a=t.rowItem;return[i("div",{key:a.key},[i("el-col",{key:a.key,style:a.colStyle||{},attrs:{span:e.getColSize(a)}},["child-form"!==a.type?i("el-form-item",{class:a.class,style:a.formItemstyle||{},attrs:{rules:a.rules,label:e.getFormItemLabel(a),prop:a.key}},["input"===a.type?i("FormInput",e._b({model:{value:e.formData[a.key],callback:function(t){e.$set(e.formData,a.key,"string"==typeof t?t.trim():t)},expression:"formData[rowItem.key]"}},"FormInput",e.getProps(a),!1)):e._e(),e._v(" "),"date-input"===a.type?i("FormDate",e._b({model:{value:e.formData[a.key],callback:function(t){e.$set(e.formData,a.key,"string"==typeof t?t.trim():t)},expression:"formData[rowItem.key]"}},"FormDate",e.getProps(a),!1)):e._e(),e._v(" "),"datetime-input"===a.type?i("FormDateTime",e._b({model:{value:e.formData[a.key],callback:function(t){e.$set(e.formData,a.key,"string"==typeof t?t.trim():t)},expression:"formData[rowItem.key]"}},"FormDateTime",e.getProps(a),!1)):e._e(),e._v(" "),"hour-minute-input"===a.type?i("FormHourMinute",e._b({model:{value:e.formData[a.key],callback:function(t){e.$set(e.formData,a.key,"string"==typeof t?t.trim():t)},expression:"formData[rowItem.key]"}},"FormHourMinute",e.getProps(a),!1)):e._e(),e._v(" "),"date-range-input"===a.type?i("FormDateRange",e._b({model:{value:e.formData[a.key],callback:function(t){e.$set(e.formData,a.key,"string"==typeof t?t.trim():t)},expression:"formData[rowItem.key]"}},"FormDateRange",e.getProps(a),!1)):e._e(),e._v(" "),"datetime-range-input"===a.type?i("FormDateTimeRange",e._b({model:{value:e.formData[a.key],callback:function(t){e.$set(e.formData,a.key,"string"==typeof t?t.trim():t)},expression:"formData[rowItem.key]"}},"FormDateTimeRange",e.getProps(a),!1)):e._e(),e._v(" "),"dynamic-select"===a.type?i("FormDictSelect",e._b({model:{value:e.formData[a.key],callback:function(t){e.$set(e.formData,a.key,"string"==typeof t?t.trim():t)},expression:"formData[rowItem.key]"}},"FormDictSelect",e.getProps(a),!1)):e._e(),e._v(" "),"normal-select"===a.type?i("FormNormalSelect",e._b({model:{value:e.formData[a.key],callback:function(t){e.$set(e.formData,a.key,"string"==typeof t?t.trim():t)},expression:"formData[rowItem.key]"}},"FormNormalSelect",e.getProps(a),!1)):e._e(),e._v(" "),"tree-select"===a.type?i("FormTreeSelect",e._b({model:{value:e.formData[a.key],callback:function(t){e.$set(e.formData,a.key,"string"==typeof t?t.trim():t)},expression:"formData[rowItem.key]"}},"FormTreeSelect",e.getProps(a),!1)):e._e(),e._v(" "),"mutiple-select"===a.type?i("FormMutipleSelect",e._b({model:{value:e.formData[a.key],callback:function(t){e.$set(e.formData,a.key,"string"==typeof t?t.trim():t)},expression:"formData[rowItem.key]"}},"FormMutipleSelect",e.getProps(a),!1)):e._e(),e._v(" "),"number-input"===a.type?i("FormNumberInput",e._b({model:{value:e.formData[a.key],callback:function(t){e.$set(e.formData,a.key,"string"==typeof t?t.trim():t)},expression:"formData[rowItem.key]"}},"FormNumberInput",e.getProps(a),!1)):e._e(),e._v(" "),"auto-complete-input"===a.type?i("FormAutoComplete",e._b({model:{value:e.formData[a.key],callback:function(t){e.$set(e.formData,a.key,"string"==typeof t?t.trim():t)},expression:"formData[rowItem.key]"}},"FormAutoComplete",e.getProps(a),!1)):e._e(),e._v(" "),"radio"===a.type?i("FormRadio",e._b({model:{value:e.formData[a.key],callback:function(t){e.$set(e.formData,a.key,"string"==typeof t?t.trim():t)},expression:"formData[rowItem.key]"}},"FormRadio",e.getProps(a),!1)):e._e(),e._v(" "),"checkbox"===a.type?i("FormCheckbox",e._b({model:{value:e.formData[a.key],callback:function(t){e.$set(e.formData,a.key,"string"==typeof t?t.trim():t)},expression:"formData[rowItem.key]"}},"FormCheckbox",e.getProps(a),!1)):e._e(),e._v(" "),"textarea"===a.type?i("FormTextarea",e._b({model:{value:e.formData[a.key],callback:function(t){e.$set(e.formData,a.key,t)},expression:"formData[rowItem.key]"}},"FormTextarea",e.getProps(a),!1)):e._e(),e._v(" "),"money-input"===a.type?i("FormMoneyInput",e._b({model:{value:e.formData[a.key],callback:function(t){e.$set(e.formData,a.key,"string"==typeof t?t.trim():t)},expression:"formData[rowItem.key]"}},"FormMoneyInput",e.getProps(a),!1)):e._e(),e._v(" "),"rate-input"===a.type?i("FormRateInput",e._b({model:{value:e.formData[a.key],callback:function(t){e.$set(e.formData,a.key,"string"==typeof t?t.trim():t)},expression:"formData[rowItem.key]"}},"FormRateInput",e.getProps(a),!1)):e._e(),e._v(" "),"area-select"===a.type?i("FormAreaSelect",e._b({model:{value:e.formData[a.key],callback:function(t){e.$set(e.formData,a.key,"string"==typeof t?t.trim():t)},expression:"formData[rowItem.key]"}},"FormAreaSelect",e.getProps(a),!1)):e._e(),e._v(" "),"mul-linkage"===a.type?i("FormMulLinkage",e._b({model:{value:e.formData[a.key],callback:function(t){e.$set(e.formData,a.key,"string"==typeof t?t.trim():t)},expression:"formData[rowItem.key]"}},"FormMulLinkage",e.getProps(a),!1)):e._e(),e._v(" "),"normal-number"===a.type?i("FormNormalNumberInput",e._b({model:{value:e.formData[a.key],callback:function(t){e.$set(e.formData,a.key,"string"==typeof t?t.trim():t)},expression:"formData[rowItem.key]"}},"FormNormalNumberInput",e.getProps(a),!1)):e._e(),e._v(" "),"component"===a.type&&a.component?i(a.component,e._b({tag:"component"},"component",e.getProps(a),!1)):e._e()],1):e._e(),e._v(" "),"child-form"===a.type?i("ChildForm",{ref:a.key,refInFor:!0,attrs:{"text-model":e.textModel,"all-disabled":e.allDisabled,item:a},model:{value:e.formData[a.key],callback:function(t){e.$set(e.formData,a.key,"string"==typeof t?t.trim():t)},expression:"formData[rowItem.key]"}}):e._e(),e._v(" "),"table-readonly"===a.type?i("TableReadonly",{ref:a.key,refInFor:!0,attrs:{item:a},model:{value:e.formData[a.key],callback:function(t){e.$set(e.formData,a.key,t)},expression:"formData[rowItem.key]"}}):e._e()],1)],1)]}))],2)]})),e._v(" "),t.divider?i("el-divider"):e._e()],2):e._e()])})),0)],1)},staticRenderFns:[]},(function(e){e&&e("data-v-70d27f9c_0",{source:".quick-form[data-v-70d27f9c]{width:100%;position:relative}.quick-form .table-query-fold[data-v-70d27f9c]{position:absolute;right:0;bottom:-40px;z-index:3}.quick-form .el-input__inner[data-v-70d27f9c]{height:36px!important;line-height:36px!important;border:1px solid #e2e3e6!important}.quick-form .block-title[data-v-70d27f9c]{position:relative;height:50px;padding-top:10px;padding-bottom:24px;font-size:16px}.quick-form .block-title .block-line[data-v-70d27f9c]{float:left;width:4px;height:16px;background:#ee473a;border-radius:2px;display:inline-block}.quick-form .block-title .block-text[data-v-70d27f9c]{margin-left:10px;float:left;height:16px;font-size:16px;color:#21273a;font-weight:600!important;vertical-align:top;line-height:16px}.quick-form .block-title .block-fold-btn[data-v-70d27f9c]{float:right;margin-right:30px;height:16px;line-height:16px;font-size:14px;cursor:pointer;user-select:none}.border-form .block-item[data-v-70d27f9c]{border:1px solid #dde0ea;border-radius:8px;margin-bottom:40px;background:#fff;padding-bottom:15px}.border-form .block-item .block-title[data-v-70d27f9c]{height:60px;line-height:60px;background:#f8f9fb;padding:20px 0 18px 24px;border-top-left-radius:8px;border-top-right-radius:8px}.border-form .block-item .block-title+.block-content[data-v-70d27f9c]{padding-top:14px}.border-form .block-item .block-content[data-v-70d27f9c]{padding:0 24px}.block-hidden[data-v-70d27f9c]{display:none}.el-divider[data-v-70d27f9c]{background-color:#f4f5f8}.scan-type[data-v-70d27f9c]{position:relative;height:36px;line-height:36px;margin-bottom:16px}.scan-type .all-fold-btn[data-v-70d27f9c]{display:inline-block;padding:0 20px;height:36px;background:#ee473a;border:1px solid #ee473a;border-radius:4px;color:#fff;cursor:pointer;text-align:center;font-size:14px;vertical-align:top}.scan-type .all-fold-btn .all-fold-icon[data-v-70d27f9c]{width:14px;height:14px;vertical-align:top;margin-top:11px}.scan-type .block-btn-list[data-v-70d27f9c]{float:left}.scan-type .block-btn-list .block-btn[data-v-70d27f9c]{border:1px solid #dde0ea;height:36px;line-height:36px;padding:0 18px;color:#3a4566;display:inline-block;cursor:pointer;user-select:none}.scan-type .block-btn-list .block-btn.focus[data-v-70d27f9c]{background:#ee473a;color:#fff}.scan-type .block-btn-list .block-btn[data-v-70d27f9c]:first-child{border-radius:4px 0 0 4px}.scan-type .block-btn-list .block-btn[data-v-70d27f9c]:last-child{border-radius:0 4px 4px 0}.scan-type .scan-type-btn[data-v-70d27f9c]{display:inline-block;float:right;padding:0 20px;height:36px;border:1px solid #aeb3bf;border-radius:4px;color:#12182a;cursor:pointer;text-align:center;font-size:14px;vertical-align:top;user-select:none}.scan-type .scan-type-btn .scan-type-icon[data-v-70d27f9c]{width:14px;height:14px;vertical-align:top;margin-top:11px}.quick-form-v2[data-v-70d27f9c] input::-webkit-inner-spin-button,.quick-form-v2[data-v-70d27f9c] input::-webkit-outer-spin-button{-webkit-appearance:none}.quick-form-v2[data-v-70d27f9c] input[type=number]{-webkit-appearance:none;appearance:none}.quick-form-v2[data-v-70d27f9c] input[type=number]{-moz-appearance:textfield}",map:void 0,media:void 0})}),{name:"ElQuickForm",mixins:[L],components:{FormInput:i,FormDictSelect:d,FormDate:p,FormDateTime:f,FormHourMinute:v,FormDateRange:y,FormDateTimeRange:g,FormNumberInput:k,FormAutoComplete:b,FormRadio:x,FormCheckbox:_,FormTextarea:r,FormNormalSelect:m,FormTreeSelect:h,FormMutipleSelect:u,FormMoneyInput:F,FormRateInput:D,FormAreaSelect:S,FormMulLinkage:C,FormNormalNumberInput:I,TableReadonly:E,ChildForm:P},props:{mode:{type:String,default:"tableQuery"},fields:{type:Array,default:()=>[]},value:{type:Object,default:()=>({})},data:{type:Object,default:()=>({})},showFoldBtn:{type:Boolean,default:!1},formItemSize:{type:String,default:"mini"},showAllFoldBtn:{type:Boolean,default:!1},showScanTypeBtn:{type:Boolean,default:!1},defaultShowRows:{type:Number,default:3},showRowsFold:{type:Boolean,default:!0}},data(){return{formData:{},currentFileds:[],dynamicDict:{},changeData:{disableList:[],allDisabled:this.allDisabled,hiddenKeyList:[],textModel:this.textModel},customItemList:[],foldBlockList:[],scanType:"normal",singleScanBlock:"",tableQueryshowRows:3,allRowsLenth:3,version:"1.1.0"}},computed:{tableQueryFoldStatus(){let e=!1;return this.tableQueryshowRows<this.allRowsLenth&&(e=!0),e}},created(){this.currentFileds=this.fields,this.initFormData(),this.getDefaultDisableList(),this.getDefaultHiddenList(),this.getCustomItemList(),this.loadDynamicSelectOptions(),this.initStatus(),this.initMode(),this.$watch("fields",e=>{console.log("理论上，不应该动态添加 fileds。尽量 fields 通过事件，内部控制自己是否显示"),this.currentFileds=[],this.$nextTick(()=>{this.currentFileds=e,this.getDefaultDisableList(),this.getDefaultHiddenList(),this.getCustomItemList(),this.loadDynamicSelectOptions(),this.initFormData(),this.initStatus(),this.initMode()})}),this.$watch("data",()=>{this.initFormData(),console.log('this.$watch("data"',this.data),this.initStatus()})},provide(){return{dynamicSelectOption:this.dynamicSelectOption,dynamicDict:this.dynamicDict,statusChangeFn:{setElementDisable:this.setElementDisable,setElementHidden:this.setElementHidden,setElementRequired:this.setElementRequired,updateFormData:this.updateFormData,valueUpdateEvent:this.valueUpdateEvent},changeData:this.changeData,formItemType:"",childChangeData:{}}},watch:{textModel(e){this.$set(this.changeData,"textModel",e)},formData:{handler:function(e){this.$emit("input",e)},deep:!0}},methods:{initMode(){"tableQuery"===this.mode&&(this.allRowsLenth=this.getFieldRow(this.currentFileds[0].children).length,console.log(" this.allRowsLenth ",this.allRowsLenth),this.tableQueryshowRows=Number(this.defaultShowRows))},toggleShow(){this.tableQueryshowRows<this.allRowsLenth?this.tableQueryshowRows=this.allRowsLenth:this.tableQueryshowRows=this.defaultShowRows},valueUpdateEvent(e){this.$emit("updateValue",e)},initFormData(){this.$set(this,"formData",{}),this.fields.forEach(e=>{e.children&&e.children instanceof Array&&e.children.forEach(e=>{e.key in this.data?(this.$set(this.formData,e.key,this.data[e.key]),this.valueUpdateEvent({[e.key]:this.data[e.key]})):e.defaultValue?(this.$set(this.formData,e.key,e.defaultValue),this.valueUpdateEvent({[e.key]:e.defaultValue})):"child-form"===e.type||"checkbox"===e.type||"mutiple-select"===e.type||"table-readonly"===e.type?this.$set(this.formData,e.key,[]):"area-select"===e.type?this.$set(this.formData,e.key,["","",""]):this.$set(this.formData,e.key,"")})})},getDefaultDisableList(){const e=[];this.fields.forEach(t=>{t.children&&t.children instanceof Array&&t.children.forEach(t=>{t.disableDefault&&e.push(t.key)})}),this.changeData.disableList=e},getCustomItemList(){const e=[];this.fields.forEach(t=>{t.children&&t.children instanceof Array&&t.children.forEach(t=>{"component"===t.type&&e.push(t.key)})}),this.customItemList=e},getDefaultHiddenList(){const e=[];this.fields.forEach(t=>{t.children&&t.children instanceof Array&&t.children.forEach(t=>{t.hiddenDefault&&e.push(t.key)})}),this.changeData.hiddenKeyList=e},getFieldRow(e){const t=[];return e?(e.forEach(e=>{if(!this.isShow(e))return;const i=this.getColSize(e);if(0===t.length){const a={span:i,rowItem:e};return void t.push([a])}if(e.nextRowFirst||"child-form"===e.type||"table-readonly"===e.type){const a={span:i,rowItem:e};return void t.push([a])}const a=t[t.length-1];if(a[a.length-1].rowItem.currentRowLast){const a={span:i,rowItem:e};return void t.push([a])}const n=t[t.length-1].map(e=>e.span).reduce((e,t)=>e+t);if(n>=24||n+i>24){const a={span:i,rowItem:e};t.push([a])}else{const a={span:i,rowItem:e};t[t.length-1].push(a)}}),t):t},setElementDisable(e,t=!0){if(t)-1===this.changeData.disableList.indexOf(e)&&this.changeData.disableList.push(e);else{const t=this.changeData.disableList.indexOf(e);t>-1&&(this.changeData.disableList=[...this.changeData.disableList.slice(0,t),...this.changeData.disableList.slice(t+1)])}},setElementHidden(e,t=!0){if(t)-1===this.changeData.hiddenKeyList.indexOf(e)&&this.changeData.hiddenKeyList.push(e);else{const t=this.changeData.hiddenKeyList.indexOf(e);t>-1&&(this.changeData.hiddenKeyList=[...this.changeData.hiddenKeyList.slice(0,t),...this.changeData.hiddenKeyList.slice(t+1)])}},setElementRequired(e,t=!0){t?this.fields.forEach(t=>{t.children&&t.children instanceof Array&&t.children.forEach(t=>{if(t.key!==e)return;if(!t.rules)return void this.$set(t,"rules",[{required:!0,message:"请输入",trigger:["blur","change"]}]);const{rules:i}=t;let a=!1,n=!1;i.forEach(e=>{if("required"in e){if(a=!0,e.required)return;e.required=!0,n=!0}}),n||a||i.push({required:!0,message:"请输入",trigger:["blur","change"]})})}):this.fields.forEach(t=>{t.children&&t.children instanceof Array&&t.children.forEach(t=>{if(t.key!==e)return;if(!t.rules)return;let i=-1;t.rules.forEach((e,t)=>{"required"in e&&(i=t)}),-1!==i&&t.rules.splice(i,1)})})},initStatus(){this.fields.forEach(e=>{e.children&&e.children instanceof Array&&e.children.forEach(e=>{if(e.valueLink&&e.valueLink.length&&e.valueLink.length>0){const{key:t}=e,i=this.data[t];e.valueLink.forEach(e=>{e.linkList&&e.linkList.length&&e.linkList.length>0&&e.linkList.forEach(t=>{if(console.log("link------",i,e),i!==e.value)return;const a=t.linkKey;a&&(console.log("triggerItem",t),t.enableLinkValue&&this.updateFormData({[a]:t.linkValue}),t.enableLinkDisable&&this.setElementDisable(a,t.linkDisable),t.enableLinkHidden&&this.setElementHidden(a,t.linkHidden),t.enableLinkRequired&&this.setElementRequired(a,t.linkRequired))})})}})})},loadDynamicSelectOptions(){const e=[];if(this.fields.forEach(t=>{t.children&&t.children instanceof Array&&t.children.forEach(t=>{if("dynamic-select"===t.type&&t.parentKey&&-1===e.indexOf(t.parentKey)&&(this.dynamicDict[t.parentKey]&&0!==this.dynamicDict[t.parentKey].length||(e.push(t.parentKey),this.$set(this.dynamicDict,t.parentKey,[]))),"area-select"===t.type){const i=t.firstParentKey||"10020",a=t.firstParentKey||"10021",n=t.firstParentKey||"10022";-1===e.indexOf(i)&&(this.dynamicDict[i]&&0!==this.dynamicDict[i].length||(e.push(i),this.$set(this.dynamicDict,i,[]))),-1===e.indexOf(a)&&(this.dynamicDict[a]&&0!==this.dynamicDict[a].length||(e.push(a),this.$set(this.dynamicDict,a,[]))),-1===e.indexOf(n)&&(this.dynamicDict[n]&&0!==this.dynamicDict[n].length||(e.push(n),this.$set(this.dynamicDict,n,[])))}})}),0===e.length)return;let t=null;t=this.dynamicSelectOption.queryKey?{[this.dynamicSelectOption.queryKey]:e}:e,console.log(t),console.log(t[this.dynamicSelectOption.queryKey]),O.get(this.dynamicSelectOption.dictUrl,{params:{[this.dynamicSelectOption.queryKey]:t[this.dynamicSelectOption.queryKey].join(",")}}).then(t=>{let i;i=t.request&&t.headers?t.data:t,200===i.status||0===i.status?i.data.length>0&&(e.forEach(e=>{console.log("pCode=",e),this.dynamicDict[e].length>0&&this.$set(this.dynamicDict,e,[])}),i.data.forEach(e=>{const t=e[this.dynamicSelectOption.parentKey];this.dynamicDict[t].push(e)})):this.$message.error(i.msg)}).catch(()=>{this.$message.error("数据字典加载错误，请刷新页面重试")})},clearValidate(e){this.$refs.form.clearValidate(e)},validateField(e){this.$refs.form.validateField(e)},getData(e=!1){const t={};return Object.keys(this.formData).filter(t=>!(this.changeData.hiddenKeyList.indexOf(t)>-1&&!e)).forEach(e=>{let i=[];this.fields.map(e=>{const t=[];return e.children.forEach(e=>{"child-form"===e.type&&t.push(e.key)}),t}).filter(e=>e.length>0).forEach(e=>{i=[...i,...e]}),i.indexOf(e)>-1?t[e]=this.$refs[e][0].childFormFileds.map((t,i)=>{const a={},{randomId:n}=t;return t.forEach(t=>{const s=t.key,l=`${e}_${n}_${s}`;this.changeData.hiddenKeyList.indexOf(l)>-1||(a[s]=this.formData[e][i][s])}),a}):this.customItemList.includes(e)?this.$refs[e]&&this.$refs[e].setItemValue&&(t[e]=this.$refs[e].getItemValue(),this.$set(this.formData,e,t[e])):t[e]=this.formData[e]}),t},validate(e,t=!1){const i=this.getData(t);this.$refs.form.validate(t=>{const a=[];if(this.fields.forEach(e=>{e.children&&e.children.length>0&&e.children.forEach(e=>{"child-form"===e.type&&a.push(e.key)})}),0===a.length)e(!!t,i);else{const n=a.map(e=>this.$refs[e][0].validateForm());Promise.all(n).then(()=>{e(!!t,i)}).catch(()=>{e(!1,i)})}})},resetFields(){this.$refs.form.resetFields(),this.fields.forEach(e=>{e.children&&e.children.length>0&&e.children.forEach(e=>{if("child-form"===e.type){const t=this.$refs[e.key];t instanceof Array?t[0].resetFields():t.resetFields()}})})},getOptionsData(e,t){const i=this.$refs[e];i&&i.getOptionsData&&i.getOptionsData(t)},isShow(e){return!(this.changeData.hiddenKeyList.indexOf(e.key)>-1)},resetFormData(e){const t=JSON.parse(JSON.stringify(e)),i=Object.keys(t),a=Object.keys(this.formData),n=i.length;if(n!==a.length)return console.log("数据字段和原有长度的不一致，无法设置"),!1;for(let e=0;e<n;e++)if(!a.includes(i[e]))return console.log("数据字段和原有的不一致，无法设置"),!1;this.formData=t},updateFormData(e){Object.keys(e).forEach(t=>{this.customItemList.includes(t)?this.$refs[t]&&this.$refs[t].setItemValue&&this.$refs[t].setItemValue(e[t]):t in this.formData&&this.$set(this.formData,t,e[t])})},foldBlock(e){const t=e.label,i=this.foldBlockList.indexOf(t);-1===i?this.foldBlockList.push(e.label):this.foldBlockList.splice(i,1)},foldAllBlock(){const e=[];this.fields.forEach(t=>{t.label&&e.push(t.label)}),this.foldBlockList.length===e.length?this.foldBlockList=[]:this.foldBlockList=e},changeScanType(){"normal"===this.scanType?(this.scanType="single",this.foldBlockList=[],this.singleScanBlock=this.fields[0].label):(this.scanType="normal",this.singleScanBlock="")},getProps(e){return e.size||(e.size=this.formItemSize),{ref:e.key,item:e,allDisabled:this.allDisabled}}}},"data-v-70d27f9c",!1,void 0,!1,s,void 0,void 0);R.install=(e,t={})=>{Object.assign(R.props,{dynamicSelectOption:{type:Object,default:()=>({dictUrl:"/wkbbackend/queryByCategoryCodeList",queryKey:"categoryCodeList",parentKey:"categoryCode",value:"bdictCode",label:"bdictDesc"})}},t),e.component(R.name,R)},module.exports=R;
